import{h as e,g as n,j as o,f as I,u as N}from"./vendor.23ef3ccf.js";import{S as f,a as S}from"./loading.e8037d2e.js";import{d as G,s as D,a as B,f as x}from"./index.1e6027d5.js";import{R as C}from"./RecommendList.ac766406.js";import"./styled-components.browser.esm.ec6bb831.js";var b="/assets/sub.52ccdf7b.png",A="/assets/add.c621a22e.png";const y=s=>e("div",{className:"navBar__container",children:e("div",{className:"navBar__container-title",children:"\u8D2D\u7269\u8F66"})});var F="/assets/enpty_cart.1276a6bb.png",L="/assets/selected.c4341689.png";const j=s=>{const{goodData:t={}}=s,[r,c]=n.exports.useState(1);let[a,d]=n.exports.useState(1);return o("div",{className:"selectedGoodsItem",children:[e("div",{className:"selectedGoodsItem__selectButton",children:e("div",{className:"isSelected",onClick:()=>c(!r),children:r?e("img",{src:L}):e("div",{className:"noSeleted"})})}),e("div",{className:"selectedGoodsItem__img",children:e("img",{src:t.imgsrc})}),o("div",{className:"selectedGoodsItem__goodsInfo",children:[o("div",{className:"selectedGoodsItem__goodsInfo_title",children:[t.tags.map(l=>e("div",{className:"tag",children:l},l)),t.title]}),e("div",{className:"selectedGoodsItem__goodsInfo_trade",children:t.tradeDescription}),o("div",{className:"selectedGoodsItem__goodsInfo_price",children:["\uFFE5",t.price]}),o("div",{className:"selectedGoodsItem__goodsInfo_buttom",children:[e("img",{src:b,className:"subButtom",onClick:()=>{d(--a)}}),e("div",{className:"goodsNum",children:a}),e("img",{src:A,className:"addButtom",onClick:()=>{d(++a)}})]})]})]})};const T=s=>{const{selectedGoodsData:t=[]}=s,{setCartInfo:r,goToShopping:c}=s;return e("div",{className:"GoodsList__container",children:t.length?e("div",{className:"container-goodsList",children:t.map((a,d)=>e(j,{goodData:a,changeCartInfo:r},d))}):o("div",{className:"container-empty_cart",children:[e("img",{src:F,className:"empty_cart__icon"}),e("div",{className:"empty_cart__desc",children:"\u60A8\u7684\u8D2D\u7269\u8F66\u8FD8\u662F\u7A7A\u7684\uFF0C\u5FEB\u53BB\u901B\u901B\u5427"}),e("div",{className:"empty_cart__button",onClick:()=>c(),children:"\u53BB\u901B\u901B"})]})})};const P=s=>{const{selectedGoods:t,totalAccount:r}=s;let[c,a]=n.exports.useState(1);const[d,l]=n.exports.useState([]),{getIndexDispatch:m,getSelectedGoodsDisPatch:i,getTotalAccountDispatch:u}=s,p=N(),h=()=>{a(++c)},g=()=>{},_=async()=>{await x(c).then(v=>{l([...d,...v.data.data.list])})};return n.exports.useEffect(()=>{_()},[c]),n.exports.useEffect(()=>{m(2)},[]),o("div",{className:"cart__container",children:[e(y,{}),e(f,{direction:"vertical",refresh:!1,pullUp:h,pullDown:g,onScroll:()=>{S()},children:o("div",{children:[e(T,{selectedGoodsData:t,setCartInfo:i,goToShopping:()=>p.push("/home/main")}),e(C,{recommendList:d,selectedGoods:t,totalAccount:r,setCartInfo:i,setTotalAccount:u})]})})]})},k=s=>({selectedGoods:s.main.selectedGoods,totalAccount:s.main.totalAccount}),E=s=>({getIndexDispatch(t){s(G(t))},getSelectedGoodsDisPatch(t){s(D(t))},getTotalAccountDispatch(t){s(B(t))}});var H=I(k,E)(n.exports.memo(P));export{H as default};
