import{f as S,g,u as A,j as n,h as a}from"./vendor.dd7849eb.js";import{_ as v,l as I,S as D,A as T,f as _,a as x}from"./add.c996f561.js";import{s as b,a as j,b as C,c as G}from"./index.27a7931f.js";const L=s=>{let{goodData:e={},selectedGoods:t,totalAccount:o,totalNum:d}=s;const{setSelectedGoods:f,setTotalAccount:m,setTotalNum:r,setAllSelected:h}=s,N=A();let c=t.findIndex(l=>l.id==e.id);const u=(l,i)=>{i>0?c!=-1?(t[c].num++,t[c].isSelected?(m(_(o,i)),r(d+1)):(t[c].isSelected=!0,m(_(o,i*t[c].num)),r(d+t[c].num))):(l.num=1,l.isSelected=!0,t=[l,...t],m(_(o,i)),r(d+1)):(t[c].isSelected&&(m(x(o,-i)),r(d-1)),t[c].num--,t[c].num==0&&t.splice(c,1)),f(t),p()},p=()=>{let l=!0;t.map(i=>{i.isSelected||(l=!1)}),h(!!l)};return n("div",{className:"listItem__container",children:[a("div",{className:"listItem__container__pic",children:a(v,{height:140,placeholder:a("img",{height:"100%",width:"100%",src:I}),children:a("img",{src:e.imgsrc,onClick:()=>N.push(`/detail/${e.id}`)})})}),n("div",{className:"listItem__container__desc",children:[n("div",{className:"listItem__container__desc_title",onClick:()=>N.push(`/detail/${e.id}`),children:[e.tags.map(l=>a("div",{className:"title-tags",children:l},l)),e.title]}),a("span",{className:"listItem__container__desc_tradeDescription",children:e.tradeDescription}),n("div",{className:"listItem__container__desc_numOfPerson",children:["\u9644\u8FD1",e.numOfPersonPurchased,"\u4EBA\u5DF2\u4E0B\u5355"]}),n("div",{className:"listItem__container__desc_price",children:["\uFFE5",e.price]}),t[c]?n("div",{className:"recommend__oprateNum",children:[a("img",{src:D,className:"recommend__subNum",onClick:()=>u(e,-e.price)}),a("span",{className:"recommend__goodsNum",children:t[c].num}),a("img",{src:T,className:"recommend__addNum",onClick:()=>u(e,e.price)})]}):a("div",{className:"listItem__container__desc_buttom",onClick:()=>u(e,e.price),children:"\u52A0\u5165\u8D2D\u7269\u8F66"})]})]})},k=s=>({selectedGoods:s.main.selectedGoods,totalAccount:s.main.totalAccount,totalNum:s.main.totalNum,allSelected:s.main.allSelected}),F=s=>({setSelectedGoods(e){s(b(e))},setTotalAccount(e){s(j(e))},setTotalNum(e){s(C(e))},setAllSelected(e){s(G(e))}});var P=S(k,F)(g.exports.memo(L));const B=s=>{const{recommendList:e=[]}=s;return n("div",{className:"recommend__container",children:[a("div",{className:"recommend__container_title",children:"--\u3000\u7206\u6B3E\u63A8\u8350\u3000--"}),e.length?e.map((t,o)=>a(P,{goodData:t},o)):""]})};export{B as R};
